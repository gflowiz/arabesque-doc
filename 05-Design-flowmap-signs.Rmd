# Design of the flowmap signs (nodes/links) {#sign-design}

This section is about changing the semiology (design/style) and changing the geometry (size, ...) of flowmap signs: nodes and links.


![](images/geom_panel_flowsigns.png)

Several types of actions can be performed on all the layer level available in the layer management section, using the following icon-buttons.


## Types of action on a layer

![](images/Buton_action_visible.png) Visible/invisible the layer.




![](images/Buton_action_semio.png) 
Semiology parameters for nodes and links: color, size, text, opacity.


![](images/Buton_action_geom.png) Geometry parameters for changing links/arrows shape only (not available for nodes): orientation, type of link (curve, triange, ...) and arrow head parameters.




![](images/Buton_action_delete.png) Definitively deletes the layer.




## Designing the nodes

Drawing the nodes opens a window that allows you to act on their parameters related to semiology, respecting the Jacques Bertin' (1967) principes. 

### Semiology paramaters

Hereby the general window.

![](images/Design_nodes.png)

#### The color of nodes

![](images/geom_add_nodes_1.png)

The color of the nodes can be fixed (e.g. in black) or shaded in a range of tones.

![](images/choose_fixed_color.png)

The color of the nodes can be shaded in a range of tones.

![](images/geom_add_nodes_1_color.png)

The reference for the color schemes is Cynthia Brewer palette for Diverging, Multi Hue and Single Hue. See: [Color Brewer advices for maps](https://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3). An Extra Palette is also proposed in Arabesque.

The color of the node can be set according to one of the variables (initial or calculated by Arabesque) present in the dataset.

![](images/geom_add_nodes_1_color_variable.png)


By definition, the type of color range (Diverging/Multi Hue/Single Hue/Extra Palette) will have to be realized according to the type of the variable to represent (quantitative/qualitative, discrete/continuous, stock/ratio/scale, ...). 

![](images/geom_add_nodes_1_color_variable2.png)


The progression (up/down) of the **color range** depends on that of the **value range**: it can be direct or inverse. The checked box means an inverse progression: a light color is applied to a strong value.

![](images/geom_add_nodes_1_color_variable3.png)


#### **Size**
The size of the nodes can be fixed and the weight defined.

![](images/geom_add_nodes_2_size.png)


The size can be **weighted by a variable** according to one of the initial or additional **variables** available in the dataset (hereby the balance).


![](images/geom_add_nodes_2_size_variable.png)

Three functions to set the size of the node according to the corresponding value are proposed: the square, the square root and the logarithm.

![](images/geom_add_nodes_2_size_fct.png)

The **ratio** representing the max width in pixel of the graphic features can be defined - according to the map bounding box, to obtain an image with balanced features (neither too small nor too big).

![](images/geom_add_nodes_2_size_ratio.png)

#### **Text**
Textuals elements can also be added near the nodes.

![](images/geom_add_nodes_3_texte.png)

The text can be defined according to one of the variable available in the dataset.

![](images/geom_add_nodes_3_texte2.png)

The opacity of the text shade (currently set to black) can be set to a given value (here 0.85).


![](images/geom_add_nodes_3_texte_fixe.png)


The opacity of the text shade (currently set to black) can be varied according to an indicator present in the dataset.

![](images/geom_add_nodes_3_texte_variable.png)

## The nodes' geometric parameters

Not implemented yet.

Upcoming projects.


## Designing the links


The visual appearance of the link layers (shape, color, opacity, size) can be modified at two points: 

-- either when importing/creating the layer - which will then result in the current layer being deleted

or

--  when managing the displayed layers, by using the following icons:

![](./images/Icon_links_geom.png) Modify the style of the links 


![](./images/Icon_links_brush.png) gives access to the window for setting the style of the link layer.


### Semiology parameters


The color, size and style of the links can be set

![](./images/Links_change_style.png)


### Geometry parameters : Change arrow shape 

Drawing the links opens a window that allows you to act on several dimensions of their geometry.

![](images/Design_links_arrows.png)

This section is the same of the [Design Link features/geometry](https://gflowiz.github.io/arabesque-doc/design-and-style-of-the-map-background.html#add-link-features) one.

#### Geometry

The geometry of the link can be oriented or not.

![](images/geom_add_links_geometry1.png)


Oriented geometry takes into account the direction of the **flow** to define the **graphic form** of the sign.


![](images/geom_add_links_oriented.png)

**Available forms of flow lines** are : straight (as euclidian distance symbolisation), straight no hook, Triangle, (line) Curve and Triangle curve.

![](images/Links_geom.png)


- **Straight**:  The link is straight and oriented, with a half arrowhead

- **Straight no hook**: The link is straight and oriented, it has a point without hook

- **Triangle**: The link is straight and takes the shape of a triangle

- **Curve** : The link is curved and oriented, its curvature is configurable.

- **Triangle curve**: The link is curved and takes the shape of a drop of water, its curvature is configurable.

- **Non oriented**: The link is straight, validated or not, it has no orientation.


#### Design of arrows

The arrow geometry - which corresponds to the visual shape variable - can be rectilinear or curvilinear. 

The curvature of the line is generated according to the Chaikin algorithm which allows to parameterize its height and its base, with respect to the body of the link.

![](images/geom_add_links_curve.png)

- **Arrow / Height curve**: The value of the height of the head is the percentage of the map distance of the link (distance between the origin and the destination) used to define the maximum (map) width of the link - the width being itself a function of the value of the flow.

- **Arrow / Height**: The value of ([0,1]) is that of the center of the curve; the point is identified by the indication of a distance from the origin node of the link.

